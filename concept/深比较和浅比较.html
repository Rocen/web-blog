<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Blog</title>
    <meta name="description" content="Web Blog">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/web-blog/assets/style.CgBWWNxN.css" as="style">
    <link rel="preload stylesheet" href="/web-blog/vp-icons.css" as="style">
    
    <script type="module" src="/web-blog/assets/app.Dr5w_XLb.js"></script>
    <link rel="preload" href="/web-blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/web-blog/assets/chunks/theme.Gt9HHogB.js">
    <link rel="modulepreload" href="/web-blog/assets/chunks/framework.Bl5GZLa3.js">
    <link rel="modulepreload" href="/web-blog/assets/concept_深比较和浅比较.md.SvushT9e.lean.js">
    <link rel="icon" href="/favicon.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a4cba12c><!--[--><!--]--><!--[--><span tabindex="-1" data-v-88a8cb41></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-88a8cb41>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a4cba12c data-v-aac6efe0><div class="VPNavBar" data-v-aac6efe0 data-v-3884d968><div class="wrapper" data-v-3884d968><div class="container" data-v-3884d968><div class="title" data-v-3884d968><div class="VPNavBarTitle has-sidebar" data-v-3884d968 data-v-58eee3d4><a class="title" href="/web-blog/" data-v-58eee3d4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/web-blog/javascript.png" alt data-v-7018b892><!--]--><span data-v-58eee3d4>Web Blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-3884d968><div class="content-body" data-v-3884d968><!--[--><!--]--><div class="VPNavBarSearch search" data-v-3884d968><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-3884d968 data-v-9d15defd><span id="main-nav-aria-label" class="visually-hidden" data-v-9d15defd> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/web-blog/" tabindex="0" data-v-9d15defd data-v-79e74c62><!--[--><span data-v-79e74c62>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/web-blog/guide/" tabindex="0" data-v-9d15defd data-v-79e74c62><!--[--><span data-v-79e74c62>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/web-blog/guide/test.html" tabindex="0" data-v-9d15defd data-v-79e74c62><!--[--><span data-v-79e74c62>GuideTest</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-3884d968 data-v-25bc2676><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-25bc2676 data-v-ede464e2 data-v-019d2d21><span class="check" data-v-019d2d21><span class="icon" data-v-019d2d21><!--[--><span class="vpi-sun sun" data-v-ede464e2></span><span class="vpi-moon moon" data-v-ede464e2></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-3884d968 data-v-e7a2a48b data-v-5a009cac><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-5a009cac data-v-99001c8a><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-3884d968 data-v-607ef21f data-v-1cd8686e><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-1cd8686e><span class="vpi-more-horizontal icon" data-v-1cd8686e></span></button><div class="menu" data-v-1cd8686e><div class="VPMenu" data-v-1cd8686e data-v-615fc6ac><!----><!--[--><!--[--><!----><div class="group" data-v-607ef21f><div class="item appearance" data-v-607ef21f><p class="label" data-v-607ef21f>Appearance</p><div class="appearance-action" data-v-607ef21f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-607ef21f data-v-ede464e2 data-v-019d2d21><span class="check" data-v-019d2d21><span class="icon" data-v-019d2d21><!--[--><span class="vpi-sun sun" data-v-ede464e2></span><span class="vpi-moon moon" data-v-ede464e2></span><!--]--></span></span></button></div></div></div><div class="group" data-v-607ef21f><div class="item social-links" data-v-607ef21f><div class="VPSocialLinks social-links-list" data-v-607ef21f data-v-5a009cac><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-5a009cac data-v-99001c8a><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-3884d968 data-v-215e07c1><span class="container" data-v-215e07c1><span class="top" data-v-215e07c1></span><span class="middle" data-v-215e07c1></span><span class="bottom" data-v-215e07c1></span></span></button></div></div></div></div><div class="divider" data-v-3884d968><div class="divider-line" data-v-3884d968></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a4cba12c data-v-e7a8c418><div class="container" data-v-e7a8c418><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-e7a8c418><span class="vpi-align-left menu-icon" data-v-e7a8c418></span><span class="menu-text" data-v-e7a8c418>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e7a8c418 data-v-8fa4cf31><button data-v-8fa4cf31>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a4cba12c data-v-c6614c00><div class="curtain" data-v-c6614c00></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c6614c00><span class="visually-hidden" id="sidebar-aria-label" data-v-c6614c00> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-b0829ed6><section class="VPSidebarItem level-0" data-v-b0829ed6 data-v-dafd2763><!----><div class="items" data-v-dafd2763><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>Home</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-b0829ed6><section class="VPSidebarItem level-0" data-v-b0829ed6 data-v-dafd2763><div class="item" role="button" tabindex="0" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><h2 class="text" data-v-dafd2763>Javascript</h2><!----></div><div class="items" data-v-dafd2763><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/javascript/Object.defineProperty%E5%92%8CProxy.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>Object.defineProperty和Proxy</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-b0829ed6><section class="VPSidebarItem level-0" data-v-b0829ed6 data-v-dafd2763><div class="item" role="button" tabindex="0" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><h2 class="text" data-v-dafd2763>CSS</h2><!----></div><div class="items" data-v-dafd2763><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/css/BFC.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>BFC</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/css/%E5%8C%BA%E5%9D%97%E7%9B%92%E5%AD%90%E5%92%8C%E8%A1%8C%E5%86%85%E7%9B%92%E5%AD%90.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>区块盒子和行内盒子</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/css/TailwindCSS%E5%8E%9F%E7%90%86.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>TailwindCSS原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/css/Grid.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>Grid</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/css/Flex.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>Flex</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-b0829ed6><section class="VPSidebarItem level-0" data-v-b0829ed6 data-v-dafd2763><div class="item" role="button" tabindex="0" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><h2 class="text" data-v-dafd2763>工程化</h2><!----></div><div class="items" data-v-dafd2763><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/Compiler%E5%92%8CCompilation.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>Compiler和Compilation</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/webpack%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>webpack工作流程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>webpack性能优化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/webpack%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%88%E4%B8%BE%E4%BE%8B%EF%BC%89.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>webpack性能优化（举例）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/webpack%20splitChunks%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>webpack splitChunks最佳实践</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/engineering/webpack%E7%83%AD%E6%9B%B4%E6%96%B0%E5%8E%9F%E7%90%86.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>webpack热更新原理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-b0829ed6><section class="VPSidebarItem level-0 has-active" data-v-b0829ed6 data-v-dafd2763><div class="item" role="button" tabindex="0" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><h2 class="text" data-v-dafd2763>概念</h2><!----></div><div class="items" data-v-dafd2763><!--[--><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/concept/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>深拷贝和浅拷贝</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/concept/%E6%B7%B1%E6%AF%94%E8%BE%83%E5%92%8C%E6%B5%85%E6%AF%94%E8%BE%83.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>深比较和浅比较</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-dafd2763 data-v-dafd2763><div class="item" data-v-dafd2763><div class="indicator" data-v-dafd2763></div><a class="VPLink link link" href="/web-blog/concept/React%E4%B8%AD%E7%9A%84%E6%B5%85%E6%AF%94%E8%BE%83.html" data-v-dafd2763><!--[--><p class="text" data-v-dafd2763>React中的浅比较</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a4cba12c data-v-de90f256><div class="VPDoc has-sidebar has-aside" data-v-de90f256 data-v-fe0b286c><!--[--><!--]--><div class="container" data-v-fe0b286c><div class="aside" data-v-fe0b286c><div class="aside-curtain" data-v-fe0b286c></div><div class="aside-container" data-v-fe0b286c><div class="aside-content" data-v-fe0b286c><div class="VPDocAside" data-v-fe0b286c data-v-8d42c92f><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-8d42c92f data-v-ad9d4535><div class="content" data-v-ad9d4535><div class="outline-marker" data-v-ad9d4535></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-ad9d4535>On this page</div><ul class="VPDocOutlineItem root" data-v-ad9d4535 data-v-c561ae38><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-8d42c92f></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-fe0b286c><div class="content-container" data-v-fe0b286c><!--[--><!--]--><main class="main" data-v-fe0b286c><div style="position:relative;" class="vp-doc _web-blog_concept_%E6%B7%B1%E6%AF%94%E8%BE%83%E5%92%8C%E6%B5%85%E6%AF%94%E8%BE%83" data-v-fe0b286c><div><p>在 JavaScript 中，**浅比较（Shallow Compare）<strong>和</strong>深比较（Deep Compare）**是两种不同的对象比较策略，区别在于是否递归检查对象的嵌套属性是否相等。以下是具体区别和常见场景：</p><hr><h3 id="_1-浅比较-shallow-compare" tabindex="-1"><strong>1. 浅比较（Shallow Compare）</strong> <a class="header-anchor" href="#_1-浅比较-shallow-compare" aria-label="Permalink to &quot;**1. 浅比较（Shallow Compare）**&quot;">​</a></h3><p><strong>定义</strong>：<br> 仅比较对象的<strong>第一层属性</strong>是否相等。如果属性是基本类型（如 <code>number</code>、<code>string</code>、<code>boolean</code>），则直接比较值；如果属性是引用类型（如对象、数组），则比较它们的<strong>内存地址</strong>是否相同（即是否为同一个引用）。</p><p><strong>特点</strong>：</p><ul><li><strong>速度快</strong>：不递归检查嵌套对象。</li><li><strong>适用于简单对象</strong>：当对象结构简单、无嵌套时效率高。</li><li><strong>不关心深层变化</strong>：若对象的深层属性发生变化，浅比较会认为对象“未变”。</li></ul><p><strong>示例</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 浅比较结果：false（因为 obj1.b 和 obj2.b 是不同引用）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> obj2); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// React 的浅比较逻辑类似：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shallowCompare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">objA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">objB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(objA).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(objB).</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> objA) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (objA[key] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> objB[key]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">shallowCompare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1, obj2)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false（因为 obj1.b !== obj2.b）</span></span></code></pre></div><p><strong>常见应用场景</strong>：</p><ul><li>React 的 <code>shouldComponentUpdate</code> 或 <code>React.memo</code> 对 <code>props</code> 和 <code>state</code> 的优化比较。</li><li>状态管理库（如 Redux）中判断是否需要触发更新。</li></ul><hr><h3 id="_2-深比较-deep-compare" tabindex="-1"><strong>2. 深比较（Deep Compare）</strong> <a class="header-anchor" href="#_2-深比较-deep-compare" aria-label="Permalink to &quot;**2. 深比较（Deep Compare）**&quot;">​</a></h3><p><strong>定义</strong>：<br> 递归比较对象的<strong>所有层级属性</strong>是否相等，包括嵌套对象、数组等引用类型的内容是否完全一致。</p><p><strong>特点</strong>：</p><ul><li><strong>准确性高</strong>：能检测深层属性的变化。</li><li><strong>性能开销大</strong>：递归遍历所有属性，对复杂对象可能影响性能。</li><li><strong>需处理特殊类型</strong>：如 <code>Date</code>、<code>RegExp</code>、<code>Set</code>、<code>Map</code> 等需特殊处理。</li></ul><p><strong>示例</strong>：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> obj2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: { c: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Lodash 的深比较方法：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(_.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1, obj2)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 手动实现简单深比较：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deepCompare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> keysA</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">keysB</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">keys</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (keysA.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keysB.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> keysA) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">keysB.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(key) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deepCompare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a[key], b[key])) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">deepCompare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(obj1, obj2)); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><p><strong>常见应用场景</strong>：</p><ul><li>深度检查对象是否相等（如保存数据前的脏检查）。</li><li>单元测试中验证复杂数据结构的正确性。</li><li>需要完全复制的场景（如深拷贝后的结果验证）。</li></ul><hr><h3 id="_3-对比总结" tabindex="-1"><strong>3. 对比总结</strong> <a class="header-anchor" href="#_3-对比总结" aria-label="Permalink to &quot;**3. 对比总结**&quot;">​</a></h3><table tabindex="0"><thead><tr><th><strong>特性</strong></th><th><strong>浅比较</strong></th><th><strong>深比较</strong></th></tr></thead><tbody><tr><td>比较层级</td><td>仅第一层属性</td><td>递归所有层级</td></tr><tr><td>性能</td><td>高（无递归）</td><td>低（递归遍历）</td></tr><tr><td>适用场景</td><td>简单对象、性能敏感场景（如 React）</td><td>复杂对象、需要精确比较的场景</td></tr><tr><td>实现复杂度</td><td>简单</td><td>复杂（需处理循环引用、特殊类型等）</td></tr><tr><td>第三方工具</td><td>React 的浅比较逻辑</td><td>Lodash 的 <code>_.isEqual</code>、<code>deep-equal</code> 等</td></tr></tbody></table><hr><h3 id="_4-如何选择" tabindex="-1"><strong>4. 如何选择？</strong> <a class="header-anchor" href="#_4-如何选择" aria-label="Permalink to &quot;**4. 如何选择？**&quot;">​</a></h3><ul><li><p><strong>优先浅比较</strong>：<br> 若对象结构简单，或明确知道深层数据不会变化（如 Redux 的不可变数据模式），浅比较能显著提升性能。</p></li><li><p><strong>必要时深比较</strong>：<br> 当需要严格判断对象内容是否完全一致（如保存数据、提交表单前的校验），或处理复杂嵌套对象时使用。</p></li></ul><hr><h3 id="_5-注意事项" tabindex="-1"><strong>5. 注意事项</strong> <a class="header-anchor" href="#_5-注意事项" aria-label="Permalink to &quot;**5. 注意事项**&quot;">​</a></h3><ul><li><p><strong>浅比较的陷阱</strong>：<br> 若对象的深层属性被修改（如 <code>obj.b.c = 3</code>），浅比较会认为对象未变化，可能导致逻辑错误。</p></li><li><p><strong>深比较的性能</strong>：<br> 避免对大型对象频繁深比较，可结合缓存或业务逻辑优化（如仅比较关键字段）。</p></li><li><p><strong>特殊类型处理</strong>：<br> 手动实现深比较时，需额外处理 <code>Date</code>、<code>RegExp</code>、<code>Set</code> 等类型，推荐直接使用第三方库。</p></li></ul></div></div></main><footer class="VPDocFooter" data-v-fe0b286c data-v-9be8bc63><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-9be8bc63><span class="visually-hidden" id="doc-footer-aria-label" data-v-9be8bc63>Pager</span><div class="pager" data-v-9be8bc63><a class="VPLink link pager-link prev" href="/web-blog/concept/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D.html" data-v-9be8bc63><!--[--><span class="desc" data-v-9be8bc63>Previous page</span><span class="title" data-v-9be8bc63>深拷贝和浅拷贝</span><!--]--></a></div><div class="pager" data-v-9be8bc63><a class="VPLink link pager-link next" href="/web-blog/concept/React%E4%B8%AD%E7%9A%84%E6%B5%85%E6%AF%94%E8%BE%83.html" data-v-9be8bc63><!--[--><span class="desc" data-v-9be8bc63>Next page</span><span class="title" data-v-9be8bc63>React中的浅比较</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"concept_react中的浅比较.md\":\"GIwQzAEu\",\"concept_深拷贝和浅拷贝.md\":\"BFxXO1Tp\",\"concept_深比较和浅比较.md\":\"SvushT9e\",\"css_bfc.md\":\"D1ibRZXB\",\"css_flex.md\":\"ByNvVzLl\",\"css_grid.md\":\"BejLy0Sn\",\"css_tailwindcss原理.md\":\"QxvKUvJ7\",\"css_区块盒子和行内盒子.md\":\"CeSzhBHC\",\"engineering_compiler和compilation.md\":\"CnnTo0A4\",\"engineering_webpack splitchunks最佳实践.md\":\"8i-0t7hY\",\"engineering_webpack工作流程.md\":\"DggiUi1O\",\"engineering_webpack性能优化.md\":\"RtdIFEtj\",\"engineering_webpack性能优化（举例）.md\":\"B-unPHv_\",\"engineering_webpack热更新原理.md\":\"ChwmTWmZ\",\"index.md\":\"BObrD3OP\",\"javascript_object.defineproperty和proxy.md\":\"-EfAs6s7\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Web Blog\",\"description\":\"Web Blog\",\"base\":\"/web-blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Guide\",\"link\":\"/guide/\"},{\"text\":\"GuideTest\",\"link\":\"/guide/test\"}],\"logo\":\"/javascript.png\",\"sidebar\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Javascript\",\"items\":[{\"text\":\"Object.defineProperty和Proxy\",\"link\":\"/javascript/Object.defineProperty和Proxy\"}]},{\"text\":\"CSS\",\"items\":[{\"text\":\"BFC\",\"link\":\"/css/BFC\"},{\"text\":\"区块盒子和行内盒子\",\"link\":\"/css/区块盒子和行内盒子\"},{\"text\":\"TailwindCSS原理\",\"link\":\"/css/TailwindCSS原理\"},{\"text\":\"Grid\",\"link\":\"/css/Grid\"},{\"text\":\"Flex\",\"link\":\"/css/Flex\"}]},{\"text\":\"工程化\",\"items\":[{\"text\":\"Compiler和Compilation\",\"link\":\"/engineering/Compiler和Compilation\"},{\"text\":\"webpack工作流程\",\"link\":\"/engineering/webpack工作流程\"},{\"text\":\"webpack性能优化\",\"link\":\"/engineering/webpack性能优化\"},{\"text\":\"webpack性能优化（举例）\",\"link\":\"/engineering/webpack性能优化（举例）\"},{\"text\":\"webpack splitChunks最佳实践\",\"link\":\"/engineering/webpack splitChunks最佳实践\"},{\"text\":\"webpack热更新原理\",\"link\":\"/engineering/webpack热更新原理\"}]},{\"text\":\"概念\",\"items\":[{\"text\":\"深拷贝和浅拷贝\",\"link\":\"/concept/深拷贝和浅拷贝\"},{\"text\":\"深比较和浅比较\",\"link\":\"/concept/深比较和浅比较\"},{\"text\":\"React中的浅比较\",\"link\":\"/concept/React中的浅比较\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>